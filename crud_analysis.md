# FlowMatrix CRUD 기능 분석

## 현재 구현 상태

### ✅ 구현된 기능 (Create, Read, Update)

#### 1. 노드(엔터티) 생성 (Create)
- **방법 1**: 좌측 패널 설정 → "노드 추가" 버튼
- **방법 2**: 드래그 앤 드롭 (좌측 노드 타입 카드 → 캔버스)
- **속성**: 타입, 부서, 프로젝트 단계, 라벨, 소요 시간 등

#### 2. 노드 조회 (Read)
- **캔버스 뷰**: 모든 노드 시각화
- **매트릭스 뷰**: 부서×단계 그리드로 필터링
- **노드 클릭**: 우측 상세 패널에서 모든 속성 확인

#### 3. 노드 속성 수정 (Update)
- **NodeDetailPanel**: 노드 클릭 시 우측 패널 열림
- **수정 가능 속성**:
  - 작업명 (label)
  - 소요 시간 (avg_time)
  - 창의성 필요도 (brain_usage)
  - 담당자 (assignee)
  - 사용 도구 (tool)
  - 온톨로지 태그 (ontology_tags)
- **실시간 반영**: 수정 즉시 캔버스에 반영

#### 4. 엣지(연결선) 생성 (Create)
- **방법**: 노드 하단 핸들 → 다른 노드 상단 핸들로 드래그
- **속성**: 자동으로 애니메이션 및 스타일 적용

#### 5. 프로젝트 관리
- **생성**: ProjectManager에서 새 프로젝트 생성
- **불러오기**: 저장된 프로젝트 목록에서 선택
- **저장**: 자동 저장 (2초 Debounce) + 수동 저장 버튼
- **내보내기/가져오기**: JSON 형식

---

## ❌ 부족한 기능 (Delete)

### 1. 노드 삭제 (Delete)
**현재 상태**: ❌ 구현되지 않음

**문제점**:
- 실수로 추가한 노드를 삭제할 방법이 없음
- 프로세스 변경 시 불필요한 노드 제거 불가

**필요한 구현**:
- 노드 선택 → Delete 키 또는 우클릭 메뉴로 삭제
- 삭제 시 연결된 엣지도 함께 제거
- 삭제 확인 다이얼로그 (실수 방지)

### 2. 엣지 삭제 (Delete)
**현재 상태**: ❌ 구현되지 않음

**문제점**:
- 잘못 연결된 엣지를 삭제할 방법이 없음
- 프로세스 흐름 변경 시 기존 연결 제거 불가

**필요한 구현**:
- 엣지 클릭 → Delete 키로 삭제
- 엣지 선택 시 하이라이트 표시
- React Flow의 `onEdgesDelete` 핸들러 구현

### 3. 노드 상태 변경 빠른 액션
**현재 상태**: ⚠️ 부분 구현 (상태는 자동 계산되지만 수동 변경 불가)

**문제점**:
- 작업 시작/완료를 수동으로 처리할 방법이 없음
- 실제 프로젝트 진행 상황을 반영하기 어려움

**필요한 구현**:
- 노드 우클릭 → "작업 시작", "완료 처리" 메뉴
- 진행률 수동 조정 슬라이더
- 상태 변경 이력 기록

---

## 🔧 개선 필요 사항

### 1. NodeDetailPanel 개선
**현재**: 모든 속성을 한 번에 표시
**개선**: 
- 탭 구조로 "기본 정보", "실행 상태", "AI 분석" 분리
- 저장 버튼 추가 (현재는 자동 저장만 가능)
- 취소 버튼 추가 (변경 사항 되돌리기)

### 2. 일괄 작업
**현재**: 개별 노드만 수정 가능
**개선**:
- 여러 노드 선택 (Shift + 클릭)
- 선택된 노드 일괄 삭제
- 선택된 노드 일괄 속성 변경 (예: 담당자 일괄 변경)

### 3. 실행 취소/다시 실행
**현재**: 없음
**개선**:
- Ctrl+Z / Ctrl+Y 단축키
- 변경 이력 스택 관리
- 최대 20단계 실행 취소

---

## 📋 구현 우선순위

### P0 (필수)
1. ✅ 노드 삭제 (Delete 키 + 우클릭 메뉴)
2. ✅ 엣지 삭제 (Delete 키)
3. ✅ 노드 컨텍스트 메뉴 (우클릭)

### P1 (중요)
4. 노드 상태 수동 변경 (작업 시작/완료)
5. 삭제 확인 다이얼로그
6. 진행률 수동 조정

### P2 (개선)
7. 여러 노드 선택
8. 일괄 삭제
9. 실행 취소/다시 실행

---

## 🎯 구현 계획

### Phase 1: 기본 삭제 기능
- [ ] 노드 삭제 핸들러 구현
- [ ] 엣지 삭제 핸들러 구현
- [ ] Delete 키 바인딩
- [ ] 삭제 시 연결된 엣지 자동 제거

### Phase 2: 컨텍스트 메뉴
- [ ] 우클릭 메뉴 컴포넌트 작성
- [ ] "작업 시작", "완료 처리", "삭제" 액션
- [ ] 노드 타입별 메뉴 항목 커스터마이징

### Phase 3: 상태 관리 개선
- [ ] 노드 상태 수동 변경 함수
- [ ] 진행률 슬라이더 UI
- [ ] 상태 변경 이력 로깅

---

**작성일**: 2026-01-10  
**작성자**: Manus AI
